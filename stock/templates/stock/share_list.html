{% extends "base.html" %}
{% block content %} 

<div class='container'>
    <button class="btn btn-primary mb-3" onclick="copyToClipboard()">Clipboard</button>
    <textarea id="clipboardText" style="position: absolute; left: -9999px;"></textarea>
    <h3>ğŸ“¦ ë¬¼ë¥˜ì¬ê³ </h3>
    <h5>ğŸ“… {{time}}, ë¥˜í˜¸ìœ¤</h5>
    <br>
    {% if group_items %}
        {% for k, v in group_items.items %}
            <h5>ğŸ“ {{ k }}</h5>
            {% for item in v %}
                <p>
                    <strong>{{ item.name }}</strong> &nbsp;&nbsp;&nbsp;&nbsp;
                    <span>ë²Œí¬ {{ item.amountOfBulk|floatformat:"-1" }}, ê°œë³„ {{ item.amountOfEach|floatformat:"-1" }}</span>
                </p>
            {% endfor %}
        {% endfor %}
    {% else %}
        <p>ğŸš« ë“±ë¡ëœ ì•„ì´í…œì´ ì—†ìŠµë‹ˆë‹¤.</p>  <!-- âœ… ì•„ì´í…œì´ ì—†ëŠ” ê²½ìš° ì²˜ë¦¬ -->
    {% endif %}
</div>

<script>
function copyToClipboard() {
    let text = "ğŸ“¦ ë¬¼ë¥˜ì¬ê³  ëª©ë¡ ({{ time|date:'Y-m-d H:i:s' }})\n\n";  // âœ… í—¤ë” í¬í•¨
    {% for place, items in group_items.items %}
        text += "ğŸ“[{{ place }}]\n";
        {% for item in items %}
            text += "{{ item.name }} : {{ item.amountOfBulk|floatformat:"-1"  }}, {{ item.amountOfEach|floatformat:"-1"}}\n\n";
        {% endfor %}
        text += "\n";  // âœ… ì¥ì†Œë³„ ì¤„ë°”ê¿ˆ
    {% endfor %}

    // âœ… textareaì— í…ìŠ¤íŠ¸ ì‚½ì… í›„ ë³µì‚¬ ì‹¤í–‰
    let textarea = document.getElementById("clipboardText");
    textarea.value = text;
    textarea.select();
    document.execCommand("copy");

    // âœ… ì‚¬ìš©ìì—ê²Œ ë³µì‚¬ ì™„ë£Œ ì•Œë¦¼
    alert("ğŸ“‹ ì¬ê³  ëª©ë¡ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
}
</script>

{% endblock %}